<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Vista previa del formulario</title>
  <link rel="stylesheet" href="/styleform.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      padding: 1em;
      color: #222;
      background-color: #fff;
    }

    .container {
      width: 100%;
      max-width: 750px;
      text-align: center;
    }

    h2, h3 {
      margin: 0.5em 0;
    }

    .logo img {
      margin-bottom: 0.5em;
    }

    .bloque {
      border: 1px solid #444;
      padding: 0.8em 1em;
      margin: 1em auto;
      border-radius: 6px;
      background-color: #fdfdfd;
      text-align: left;
    }

    p {
      margin: 0.2em 0;
      font-size: 11pt;
    }

    .botones {
      margin-top: 1.5em;
    }

    .pie-firma {
      margin-top: 2em;
      text-align: center;
      font-size: 10pt;
    }

    .firmas {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1em;
    }

    .firma-bloque {
      width: 48%;
    }

    .linea-firma {
      border-bottom: 1px solid #000;
      height: 2em;
      margin-bottom: 0.3em;
    }

    .separador-legal {
      border-top: 2px solid #000;
      margin: 1em auto;
      width: 100%;
    }

    .texto-legal {
      margin-top: 0.5em;
      font-size: 9pt;
      text-align: justify;
    }

    /* Fuerza salto de p√°gina antes de Declaraci√≥n solicitada */
    .salto-pagina {
      page-break-before: always;
    }

    @media print {
      @page {
        margin: 1.5cm;
      }
      body {
        font-size: 11pt;
        margin: 0;
      }
      .botones, .btn, button {
        display: none;
      }
      html, body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <img src="/img/LogoAlcaldia.png" alt="Logo institucional" width="100">
      <h2>ALCALD√çA MUNICIPAL LA LIBERTAD ESTE</h2>
      <h3>FORMULARIO √öNICO DE SOLICITUD</h3>
    </div>

    <p><strong>C√≥digo del formulario:</strong> <%= data.codigoFormulario %></p>
    <p><strong>No. de Presentaci√≥n REF/LLE:</strong> <%= data.refLLE %></p>

    <div class="bloque">
      <h3>Datos del solicitante</h3>
      <p><strong>Nombre:</strong> <%= [data.primerNombre, data.segundoNombre, data.primerApellido, data.segundoApellido, data.tercerApellido].filter(Boolean).join(" ") %></p>
      <p><strong>Municipio:</strong> <%= data.municipio %></p>
      <p><strong>Distrito:</strong> <%= data.distrito %></p>
      <p><strong>Lugar de presentaci√≥n:</strong> <%= data.lugarPresentacion %></p>
      <p><strong>Fecha de presentaci√≥n:</strong> <%= data.fechaPresentacion %></p>
      <p><strong>Hora:</strong> <%= data.horaPresentacion %></p>
      <p><strong>Contacto para consultar estado de tr√°mite:</strong> <%= data.contacto %></p>
      <p><strong>Plazo de respuesta:</strong> <%= data.plazo %></p>
      <p><strong>Tipo de documento de identificaci√≥n:</strong> <%= data.docTipo || '‚Äî' %></p>
      <p><strong>N√∫mero de documento:</strong>
        <% if (data.docTipo === 'DUI') { %><%= data.dui %>
        <% } else if (data.docTipo === 'Pasaporte') { %><%= data.pasaporte %>
        <% } else if (data.docTipo === 'Otro') { %><%= data.otroDoc %>
        <% } else { %>‚Äî<% } %>
      </p>
      <p><strong>Domicilio:</strong> <%= [data.colonia ? 'Colonia ' + data.colonia : null, data.canton ? 'Cant√≥n ' + data.canton : null, data.calle ? 'Calle/Pasaje ' + data.calle : null, data.numeroCasa ? '# ' + data.numeroCasa : null].filter(Boolean).join(', ') || '‚Äî' %></p>
      <p><strong>¬øEs el mismo titular del asiento?:</strong> <%= data.titular || '‚Äî' %></p>
      <p><strong>Car√°cter en que comparece:</strong> <%= data.caracter || '‚Äî' %></p>
      <p><strong>Tel√©fono:</strong> <%= data.telefono %></p>
      <p><strong>Correo electr√≥nico:</strong> <%= data.correo %></p>
    </div>

    <div class="bloque">
      <h3>Datos del titular del asiento</h3>
      <p><strong>Nombre:</strong> <%= [data.primerNombreTitular, data.segundoNombreTitular, data.primerApellidoTitular, data.segundoApellidoTitular, data.tercerApellidoTitular].filter(Boolean).join(" ") %></p>
      <p><strong>Tipo de documento:</strong> <%= data.docTitular || '‚Äî' %></p>
      <p><strong>N√∫mero de documento:</strong> <%= data.duiTitular || data.nuiTitular || data.otroTitular || '‚Äî' %></p>
      <p><strong>Fecha del hecho o acto jur√≠dico:</strong> <%= data.fechaHecho %></p>
      <p><strong>Lugar del hecho o acto jur√≠dico:</strong> <%= data.lugarHecho %></p>
      <p><strong>Nombre de la madre:</strong> <%= [data.primerNombreMadre, data.segundoNombreMadre, data.primerApellidoMadre, data.segundoApellidoMadre, data.tercerApellidoMadre].filter(Boolean).join(" ") %></p>
      <p><strong>Nombre del padre:</strong> <%= [data.primerNombrePadre, data.segundoNombrePadre, data.primerApellidoPadre, data.segundoApellidoPadre].filter(Boolean).join(" ") %></p>
    </div>

    <div class="bloque salto-pagina">
      <h3>Declaraci√≥n solicitada</h3>
      <p><%= data.declaracion || '‚Äî' %></p>
    </div>

    <div class="bloque">
      <h3>Documentaci√≥n presentada</h3>
      <p><%= [...(data.doc || []), ...(data.doc2 || [])].join(', ') || '‚Äî' %></p>
    </div>

    <div class="botones">
      <button onclick="window.print()">üñ®Ô∏è Imprimir</button>
      <a href="/formulario" class="btn">Nuevo formulario</a>
      <a href="/editar-formulario?codigo=<%= data.codigoFormulario.replace('LLE-2025-', '') %>" 
        class="btn" 
        style="background-color:#2e7d32; color:white; padding:0.5em 1.2em; border-radius:6px;">
        Editar
      </a>
    </div>
    <div class="pie-firma">
      <div class="firmas">
        <div class="firma-bloque">
          <p class="linea-firma"></p>
          <p><strong>Usuario solicitante</strong><br>(Firma o huella)</p>
        </div>
        <div class="firma-bloque">
          <p class="linea-firma"></p>
          <p><strong>REF</strong><br>(Nombre y firma)</p>
        </div>
      </div>
      <div class="separador-legal"></div>
      <p class="texto-legal">
        La informaci√≥n contenida en esta solicitud es de exclusiva responsabilidad de quien la complete, en los casos donde la persona no supiese leer ni escribir la persona que ayude a completarlo lo har√° conforme a lo expresado por el interesado quien deber√° en todo caso estampar la huella o firma.
      </p>
    </div>
  </div>
</body>
</html>
