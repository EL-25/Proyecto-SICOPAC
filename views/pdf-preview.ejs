<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Vista previa del formulario</title>
  <link rel="stylesheet" href="/styleform.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      padding: 1em;
      color: #222;
      background-color: #fff;
    }
    .container {
      width: 100%;
      max-width: 750px;
      text-align: center;
    }
    .logo-header {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      margin-bottom: 0.5em;
    }
    .logo-header img {
      width: 100px;
      height: auto;
      margin-right: auto;
    }
    .titulo-formulario {
      text-align: center;
      flex-grow: 1;
    }
    .titulo-formulario h3 {
      font-size: 13pt;
      margin: 0;
      line-height: 1.2;
    }
    .codigo-ref {
      display: flex;
      justify-content: space-between;
      margin: 0.5em 0 1em 0;
      font-size: 11pt;
    }
    .bloque {
      border: 1px solid #444;
      padding: 0.8em 1em;
      margin: 1em auto;
      border-radius: 6px;
      background-color: #fdfdfd;
      text-align: left;
    }
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.3em 1em;
    }
    .grid-2 p {
      margin: 0.2em 0;
      font-size: 11pt;
    }
    .full {
      grid-column: span 2;
    }
    .botones {
      margin-top: 1.5em;
    }
    @media print {
      @page {
        margin: 1.5cm;
        size: A4 portrait;
      }
      body {
        font-size: 11pt;
        margin: 0;
      }
      .botones,
      .btn,
      button {
        display: none;
      }
      html,
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }
    @media (max-width: 600px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }
    .firma-img-ref {
      max-height: 80px;
      width: auto;
    }
    .segunda-pagina {
      page-break-before: always;
    }
    .firmas {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 1em;
    }
    .firma-bloque {
      width: 48%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
    }
    .linea-firma {
      border-bottom: 1px solid #000;
      height: 2em;
      width: 100%;
      margin-bottom: 0.3em;
    }
    .firma-texto {
      margin: 0;
      font-size: 10pt;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">

    <div class="logo-header">
      <img src="/img/LogoAlcaldia.png" alt="Logo institucional">
      <div class="titulo-formulario">
        <h3>FORMULARIO ÚNICO DE SOLICITUD</h3>
      </div>
    </div>

    <div class="codigo-ref">
      <p><strong>Código del formulario:</strong> <%= data.codigoFormulario || '—' %></p>
      <p><strong>No. de Presentación REF/LLE:</strong> <%= data.refLLE || '—' %></p>
    </div>

        <!-- Bloque datos titular -->
    <div class="bloque">
      <h3>Datos del titular del asiento</h3>
      <div class="grid-2">
        <p class="full"><strong>Nombre:</strong>
          <%= [
            data.primerNombreTitular,
            data.segundoNombreTitular,
            data.primerApellidoTitular,
            data.segundoApellidoTitular,
            data.tercerApellidoTitular
          ].filter(Boolean).join(" ") || '—' %>
        </p>
        <p><strong>Tipo de documento:</strong> <%= data.docTitular || '—' %></p>
        <p><strong>Número de documento:</strong>
          <%= data.duiTitular || data.nuiTitular || data.otroTitular || '—' %>
        </p>
        <p><strong>Fecha del hecho:</strong> <%= data.fechaHecho || '—' %></p>
        <p><strong>Lugar del hecho:</strong> <%= data.lugarHecho || '—' %></p>
        <p class="full"><strong>Nombre de la madre:</strong>
          <%= [
            data.primerNombreMadre,
            data.segundoNombreMadre,
            data.primerApellidoMadre,
            data.segundoApellidoMadre,
            data.tercerApellidoMadre
          ].filter(Boolean).join(" ") || '—' %>
        </p>
        <p class="full"><strong>Nombre del padre:</strong>
          <%= [
            data.primerNombrePadre,
            data.segundoNombrePadre,
            data.primerApellidoPadre,
            data.segundoApellidoPadre,
            data.tercerApellidoPadre
          ].filter(Boolean).join(" ") || '—' %>
        </p>
      </div>
    </div>

    <!-- Bloque declaración -->
    <div class="bloque">
      <h3>Declaración solicitada</h3>
      <p><%= data.declaracion || '—' %></p>
    </div>

    <!-- Segunda página: documentación y firmas -->
    <div class="segunda-pagina">
      <!-- Bloque documentación presentada -->
      <div class="bloque">
        <h3>Documentación presentada</h3>
        <% const documentos = [].concat(data.doc || [], data.doc2 || []); %>
        <% if (documentos && documentos.length) { %>
          <ul>
            <% documentos.forEach(d => { %>
              <li><%= d %></li>
            <% }) %>
          </ul>
        <% } else { %>
          <p>—</p>
        <% } %>
      </div>

            <!-- Firmas -->
      <div class="pie-firma">
        <div class="firmas">
          <!-- Bloque Usuario solicitante -->
          <div class="firma-bloque firma-contenedor">
            <% if (data.firmaSolicitante) { %>
              <img src="<%= data.firmaSolicitante %>" alt="Firma solicitante" class="firma-img-ref">
            <% } else { %>
              <div class="firma-espacio"></div>
            <% } %>
            <div class="linea-firma"></div>
            <p class="firma-texto"><strong>Usuario solicitante</strong><br>(Firma o huella)</p>
          </div>

          <!-- Bloque REF -->
          <div class="firma-bloque firma-contenedor">
            <% if (data.firmaUsuario) { %>
              <img src="<%= data.firmaUsuario %>" alt="Firma REF" class="firma-img-ref">
            <% } else { %>
              <div class="firma-espacio"></div>
            <% } %>
            <div class="linea-firma"></div>
            <p class="firma-texto"><strong>REF</strong><br>(Nombre y firma)</p>
          </div>
        </div>

        <div class="separador-legal"></div>
        <p class="texto-legal">
          La información contenida en esta solicitud es de exclusiva responsabilidad de quien la complete...
        </p>
      </div>

    </div> <!-- cierre segunda-pagina -->
  </div> <!-- cierre container -->
</body>
</html>
